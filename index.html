<!DOCTYPE>
<html>

<head>
        <script 
                src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js">
        </script>
</head>

<body style = "background: url('2.5DGamePics/000N.jpeg') no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;">
        
        <script>
                $(document).ready(function () {
                        console.log("document ready!");
                        var map;
                        var currentPos = "(0,0,0)";
                        var direction = "North";
                        $.getJSON("map.json", function(data){
                                console.log(data);
                                map = data;
                                  //$("body").css('background-image', "url('" + data["(0,0,0)"]['North']['Img'] + "')");
                        });
                        document.onkeydown = function (e) {
                                console.log(e.which);
                                console.log(currentPos);        //for testing

                                switch(e.which){
                                        //left
                                        case 37:
                                                direction = "West";
                                                $('#dir').html(direction);
                                                $('body').css('background-image', "url('" + map[currentPos][direction]['Img'] + "')");
                                                break;
                                               
                                        //up
                                        case 38:
                                                direction = "North";
                                                $('#dir').html(direction);
                                                $('body').css('background-image', "url('" + map[currentPos][direction]['Img'] + "')");
                                                break;
                
                                        //right
                                        case 39:
                                                direction = "East";
                                                $('#dir').html(direction);
                                                $('body').css('background-image', "url('" + map[currentPos][direction]['Img'] + "')");
                                                break;
                
                                        //down
                                        case 40:
                                                direction = "South";
                                                $('#dir').html(direction);
                                                $('body').css('background-image', "url('" + map[currentPos][direction]['Img'] + "')");
                                                break;
                                        
                                        default:
                                                break;
                                  }
                                  e.preventDefault();
                                }
                        
                        //leftclick equals move forward
                        $(this).on("click", function () {
                                var NextPos;
                                if ("NextPos" in map[currentPos][direction]) {
                                        NextPos = map[currentPos][direction]["NextPos"];
                                        currentPos = NextPos;
                                        $('body').css('background-image', "url('" + map[currentPos][direction]['Img'] + "')");
                                }
                        });
                });
        
        </script>
        
</body>

</html>
